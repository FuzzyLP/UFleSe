<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" content="#273f79"/><link rel="stylesheet" href="lpdoc.css" type="text/css"/><script type="text/javascript" src="lpdoc-aux.js"></script><title>Low-level Prolog to Java socket connection &mdash; Prolog/Java Bidirectional Interface</title></head><body><div class="lpdoc-page rightbar"><a href="#" id="sidebar-toggle-button" class="lpdoc-navbutton"><span id="sidebar-button-arrow">&#9776;</span></a><div id="sidebar" class="lpdoc-sidebar"><h2>Module Sections</h2><ul><li><a href="#Usage and interface">Usage and interface</a></li><li><a href="#Documentation on exports">Documentation on exports</a></li></ul><h2>Global Links</h2><ul><li><a href="javall_docfulltoc.html">Table of Contents</a></li><li><a href="javall_docrefs.html">References</a></li><li><a href="javall_doccopyright.html">Copyright</a></li></ul><h2>Indices</h2><ul><li><a href="javall_docliindex.html">Library/Module Index</a></li><li><a href="javall_docpdindex.html">Predicate/Method Index</a></li><li><a href="javall_docprindex.html">Property Index</a></li><li><a href="javall_docteindex.html">Regular Type Index</a></li><li><a href="javall_docdeindex.html">Declaration Index</a></li><li><a href="javall_doccoindex.html">Concept Index</a></li><li><a href="javall_docauindex.html">Author Index</a></li><li><a href="javall_docglindex.html">Global Index</a></li></ul></div><div class="lpdoc-main"><div class="lpdoc-nav"><span class="lpdoc-on-right"><a class="lpdoc-navbutton" href="javall_doc.html">&#x2191;</a><a class="lpdoc-navbutton" href="jtopl.html">&#x2190;</a><a class="lpdoc-navbutton" href="javall_docrefs.html">&#x2192;</a></span><span><a href="javall_doc.html">Prolog/Java Bidirectional Interface</a> &raquo; </span></div><div id=""><h1>Low-level Prolog to Java socket connection</h1><a class="lpdoc-idx-anchor" href="javall_docliindex.html#javasock"></a>
<strong>Author(s):</strong> <a class="lpdoc-idx-anchor" id="Jesus Correas" href="javall_docauindex.html#Jesus Correas">Jes&uacute;s Correas</a>.<p>
<p><a class="lpdoc-idx-anchor" id="0" href="javall_doccoindex.html#Socket implementation"></a> This module defines a low-level socket interface, to be used by javart and jtopl. Includes all the code related directly to the handling of sockets. This library should not be used by any user program, because is a very low-level connection to Java. Use <a class="lpdoc-idx-anchor" id="1" href="javall_docglindex.html#javart"><tt>javart</tt></a> (Prolog to Java interface) or <a class="lpdoc-idx-anchor" id="2" href="javall_docglindex.html#jtopl"><tt>jtopl</tt></a> (Java to Prolog interface) libraries instead.<p><br/><div id="Usage and interface"><h2>Usage and interface</h2><div class="lpdoc-cartouche"><ul><li><strong>Library usage:</strong><br/><tt>:- use_module(library(javall/javasock)).</tt><li><strong>Exports:</strong><br/><ul class="lpdoc-itemize-minus"><li><em>Predicates:</em><br/><a class="lpdoc-idx-anchor" id="3" href="javall_docglindex.html#bind_socket_interface/1"><tt>bind_socket_interface/1</tt></a>, <a class="lpdoc-idx-anchor" id="4" href="javall_docglindex.html#start_socket_interface/2"><tt>start_socket_interface/2</tt></a>, <a class="lpdoc-idx-anchor" id="5" href="javall_docglindex.html#stop_socket_interface/0"><tt>stop_socket_interface/0</tt></a>, <a class="lpdoc-idx-anchor" id="6" href="javall_docglindex.html#join_socket_interface/0"><tt>join_socket_interface/0</tt></a>, <a class="lpdoc-idx-anchor" id="7" href="javall_docglindex.html#java_query/2"><tt>java_query/2</tt></a>, <a class="lpdoc-idx-anchor" id="8" href="javall_docglindex.html#java_response/2"><tt>java_response/2</tt></a>, <a class="lpdoc-idx-anchor" id="9" href="javall_docglindex.html#prolog_query/2"><tt>prolog_query/2</tt></a>, <a class="lpdoc-idx-anchor" id="10" href="javall_docglindex.html#prolog_response/2"><tt>prolog_response/2</tt></a>, <a class="lpdoc-idx-anchor" id="11" href="javall_docglindex.html#is_connected_to_java/0"><tt>is_connected_to_java/0</tt></a>, <a class="lpdoc-idx-anchor" id="12" href="javall_docglindex.html#java_debug/1"><tt>java_debug/1</tt></a>, <a class="lpdoc-idx-anchor" id="13" href="javall_docglindex.html#java_debug_redo/1"><tt>java_debug_redo/1</tt></a>, <a class="lpdoc-idx-anchor" id="14" href="javall_docglindex.html#start_threads/0"><tt>start_threads/0</tt></a>.
</ul><li><strong>Imports:</strong><br/><ul class="lpdoc-itemize-minus"><li><em>Application modules:</em><br/><a class="lpdoc-idx-anchor" id="15" href="javall_docglindex.html#jtopl"><tt>jtopl</tt></a>.
<li><em>System library modules:</em><br/><a class="lpdoc-idx-anchor" id="16" href="javall_docglindex.html#sockets"><tt>sockets</tt></a>, <a class="lpdoc-idx-anchor" id="17" href="javall_docglindex.html#format"><tt>format</tt></a>, <a class="lpdoc-idx-anchor" id="18" href="javall_docglindex.html#concurrency"><tt>concurrency</tt></a>, <a class="lpdoc-idx-anchor" id="19" href="javall_docglindex.html#sockets_io"><tt>sockets_io</tt></a>.
<li><em>Packages:</em><br/><a class="lpdoc-idx-anchor" id="20" href="javall_docglindex.html#prelude"><tt>prelude</tt></a>, <a class="lpdoc-idx-anchor" id="21" href="javall_docglindex.html#nonpure"><tt>nonpure</tt></a>, <a class="lpdoc-idx-anchor" id="22" href="javall_docglindex.html#condcomp"><tt>condcomp</tt></a>, <a class="lpdoc-idx-anchor" id="23" href="javall_docglindex.html#assertions"><tt>assertions</tt></a>, <a class="lpdoc-idx-anchor" id="24" href="javall_docglindex.html#regtypes"><tt>regtypes</tt></a>, <a class="lpdoc-idx-anchor" id="25" href="javall_docglindex.html#isomodes"><tt>isomodes</tt></a>.
</ul></ul></div></div><div id="Documentation on exports"><h2>Documentation on exports</h2><div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="bind_socket_interface/1" href="javall_docpdindex.html#bind_socket_interface/1">bind_socket_interface/1</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>bind_socket_interface(Port)</tt>
</span><p>Given an port number, waits for a connection request from the Java side, creates the sockets to connect to the java process, and starts the threads needed to handle the connection.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:int/1)</span><span><span class="lpdoc-var">Port</span> is an integer.
</span>
<li><em>The following properties should hold at call time:</em><br/><span class="lpdoc-on-right"> (term_typing:nonvar/1)</span><span><span class="lpdoc-var">Port</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="start_socket_interface/2" href="javall_docpdindex.html#start_socket_interface/2">start_socket_interface/2</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>start_socket_interface(Address,Stream)</tt>
</span><p>Given an address in format &apos;node:port&apos;, creates the sockets to connect to the java process, and starts the threads needed to handle the connection.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:term/1)</span><span><span class="lpdoc-var">Address</span> is any term.
</span><br/><span class="lpdoc-on-right"> (streams_basic:stream/1)</span><span><span class="lpdoc-var">Stream</span> is an open stream.
</span>
<li><em>The following properties should hold at call time:</em><br/><span class="lpdoc-on-right"> (term_typing:nonvar/1)</span><span><span class="lpdoc-var">Address</span> is currently a term which is not a free variable.
</span><br/><span class="lpdoc-on-right"> (term_typing:nonvar/1)</span><span><span class="lpdoc-var">Stream</span> is currently a term which is not a free variable.
</span>
</ul></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="stop_socket_interface/0" href="javall_docpdindex.html#stop_socket_interface/0">stop_socket_interface/0</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"></span><p>Closes the sockets to disconnect from the java process, and waits until the threads that handle the connection terminate.</p><ul class="lpdoc-itemize-minus"></ul></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="join_socket_interface/0" href="javall_docpdindex.html#join_socket_interface/0">join_socket_interface/0</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"></span><p>Waits until the threads that handle the connection terminate.</p><ul class="lpdoc-itemize-minus"></ul></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="java_query/2" href="javall_docpdindex.html#java_query/2">java_query/2</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>java_query(ThreadId,Query)</tt>
</span><p>Data predicate containing the queries to be sent to Java. First argument is the Prolog thread Id, and second argument is the query to send to Java.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:atm/1)</span><span><span class="lpdoc-var">ThreadId</span> is an atom.
</span><br/><span class="lpdoc-on-right"> (basic_props:term/1)</span><span><span class="lpdoc-var">Query</span> is any term.
</span>
</ul>
The predicate is of type <em>concurrent</em>.<br/></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="java_response/2" href="javall_docpdindex.html#java_response/2">java_response/2</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>java_response(Id,Response)</tt>
</span><p>Data predicate that stores the responses to requests received from Java. First argument corresponds to the Prolog thread Id; second argument corresponds to the response itself.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:atm/1)</span><span><span class="lpdoc-var">Id</span> is an atom.
</span><br/><span class="lpdoc-on-right"> (basic_props:term/1)</span><span><span class="lpdoc-var">Response</span> is any term.
</span>
</ul>
The predicate is of type <em>concurrent</em>.<br/></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="prolog_query/2" href="javall_docpdindex.html#prolog_query/2">prolog_query/2</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>prolog_query(Id,Query)</tt>
</span><p>Data predicate that keeps a queue of the queries requested to Prolog side from Java side.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:int/1)</span><span><span class="lpdoc-var">Id</span> is an integer.
</span><br/><span class="lpdoc-on-right"> (basic_props:term/1)</span><span><span class="lpdoc-var">Query</span> is any term.
</span>
</ul>
The predicate is of type <em>concurrent</em>.<br/></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="prolog_response/2" href="javall_docpdindex.html#prolog_response/2">prolog_response/2</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"><tt>prolog_response(Id,Response)</tt>
</span><p>Data predicate that keeps a queue of the responses to queries requested to Prolog side from Java side.</p><ul class="lpdoc-itemize-minus"><li><em>Call and exit should be compatible with:</em><br/><span class="lpdoc-on-right"> (basic_props:int/1)</span><span><span class="lpdoc-var">Id</span> is an integer.
</span><br/><span class="lpdoc-on-right"> (basic_props:term/1)</span><span><span class="lpdoc-var">Response</span> is any term.
</span>
</ul>
The predicate is of type <em>concurrent</em>.<br/></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="is_connected_to_java/0" href="javall_docpdindex.html#is_connected_to_java/0">is_connected_to_java/0</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"></span><p>Checks if the connection to Java is established.</p><ul class="lpdoc-itemize-minus"></ul></div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="java_debug/1" href="javall_docpdindex.html#java_debug/1">java_debug/1</a>:</div><div class="lpdoc-deftext">No further documentation available for this predicate.</div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="java_debug_redo/1" href="javall_docpdindex.html#java_debug_redo/1">java_debug_redo/1</a>:</div><div class="lpdoc-deftext">No further documentation available for this predicate.</div></div><p>
<div><span class="lpdoc-predtag-on-right">PREDICATE</span><div class="lpdoc-defname"><a class="lpdoc-idx-anchor" id="start_threads/0" href="javall_docpdindex.html#start_threads/0">start_threads/0</a>:</div><div class="lpdoc-deftext"><p><span class="lpdoc-check-header">Usage:</span><span class="lpdoc-usagedecl"></span><p>Starts the threads that will handle the connection to Java. This predicate is declared public for internal purposes, and it is not intended to be used by a user program.</p><ul class="lpdoc-itemize-minus"></ul></div></div><p>
</div></div></div><div class="lpdoc-clearer"></div></div><div class="lpdoc-footer">Generated with LPdoc using Ciao</div></body></html>